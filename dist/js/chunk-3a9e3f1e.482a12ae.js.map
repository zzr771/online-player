{"version":3,"sources":["webpack:///./src/pages/Search/routes/MVs.vue","webpack:///./src/pages/Search/routes/MVs.vue?ed5a","webpack:///./src/components/MVCard.vue?fe14","webpack:///./src/pages/Search/routes/MVs.vue?b755","webpack:///./src/components/MVCard.vue","webpack:///./src/components/MVCard.vue?d6d7"],"names":["class","mvs","mv","index","key","totalPageNum","totalPage","LIMIT","setup","data","currentPage","newValue","result","code","value","Math","ceil","mvCount","length","Object","assign","keyword","oldValue","uploadCurrentPage","components","Pagination","MVCard","__exports__","render","routeGo","alt","img","genImgURL","simplifyPlayCount","playCount","duration","parseTime","size","name","artistName","props","picUrl","cover","router","push","path","id","PlayIcon"],"mappings":"4IACOA,MAAM,O,GACJA,MAAM,e,8GADb,eAKM,MALN,EAKM,CAJJ,eAEM,MAFN,EAEM,E,mBADJ,eAAkE,2BAApC,EAAAC,KAAG,SAAjBC,EAAIC,G,wBAApB,eAAkE,GAA9BC,IAAKD,EAAQD,GAAIA,G,0BAEvD,eAAmD,GAAtCG,aAAc,EAAAC,WAAS,2B,4BASlCC,EAAQ,GACC,GACbC,MADa,WAEX,IAAIC,EAAO,eAAO,QAEdR,EAAM,eAAS,IACfK,EAAY,eAAI,GAEhBI,EAAc,eAAI,GACtB,eAAQ,cAAeA,GAGvB,gBACE,kBAAMD,EAAK,iBACX,SAACE,GAEC,GAAKA,EAASC,QAA4B,MAAlBD,EAASE,KAAjC,CAEA,IAAID,EAASD,EAASC,OACtBN,EAAUQ,MAAQC,KAAKC,KAAKJ,EAAOK,QAAUV,GAE7CN,EAAIiB,OAAS,EACbjB,EAAMkB,OAAOC,OAAOnB,EAAKW,EAAOX,SAKpC,gBACE,kBAAMQ,EAAKY,WACX,SAACV,EAAUW,GACLX,IAAaW,IACfZ,EAAYI,MAAQ,MAM1B,IAAIS,EAAoB,eAAO,qBAK/B,OAJA,eAAMb,GAAa,SAACC,GAClBY,EAAkBZ,MAGb,CAAEV,MAAKK,cAEhBkB,WAAY,CAAEC,aAAA,KAAYC,SAAA,O,iCCnD5B,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf,W,kCCAA,W,gJCGS5B,MAAM,Y,GAEJA,MAAM,c,uBACT,eAAoC,KAAjCA,MAAM,wBAAsB,Y,SAG5BA,MAAM,Y,GAKVA,MAAM,Q,GACNA,MAAM,U,0GAbX,eAcM,OAdDA,MAAM,UAAW,QAAK,8BAAE,EAAA6B,SAAA,EAAAA,QAAA,sB,CAC3B,eAUM,MAVN,EAUM,C,iCATJ,eAA2D,OAApBC,IAAI,GAAI1B,IAAK,EAAA2B,K,eAAvC,EAAAC,UAAU,EAAAD,IAAG,YAC1B,eAGM,MAHN,EAGM,CAFJ,E,eAAoC,IACpC,eAAG,EAAAE,kBAAkB,EAAA/B,GAAGgC,YAAS,KAEP,EAAAhC,GAAGiC,U,iBAA/B,eAEM,MAFN,EAEM,eADD,EAAAC,UAAU,EAAAlC,GAAGiC,SAAQ,U,sBAE1B,eAAgC,GAArBE,KAAM,OAEnB,eAAiC,IAAjC,EAAiC,eAAd,EAAAnC,GAAGoC,MAAI,GAC1B,eAAyC,IAAzC,EAAyC,eAApB,EAAApC,GAAGqC,YAAU,K,wCASvB,GACbC,MAAO,CAAEtC,GAAIiB,QACbX,MAFa,SAEPgC,GACJ,IAAIT,EAAM,gBAAS,WACjB,OAAIS,EAAMtC,GAAGuC,OAAeD,EAAMtC,GAAGuC,OACjCD,EAAMtC,GAAGwC,MAAcF,EAAMtC,GAAGwC,WAApC,KAGIC,EAAS,iBACf,SAASd,IACPc,EAAOC,KAAK,CAAEC,KAAM,OAAF,OAASL,EAAMtC,GAAG4C,MAGtC,MAAO,CAAEf,MAAKF,UAASG,UAAA,OAAWC,kBAAA,OAAmBG,UAAA,SAEvDZ,WAAY,CAAEuB,WAAA,O,iCChChB,MAAMpB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,U","file":"js/chunk-3a9e3f1e.482a12ae.js","sourcesContent":["<template>\r\n  <div class=\"mvs\">\r\n    <div class=\"mvs-wrapper\">\r\n      <MVCard v-for=\"(mv, index) in mvs\" :key=\"index\" :mv=\"mv\"></MVCard>\r\n    </div>\r\n    <Pagination :totalPageNum=\"totalPage\"></Pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from \"@/components/Pagination\"\r\nimport MVCard from \"@/components/MVCard\"\r\nimport { ref, reactive, provide, watch, inject } from \"vue\"\r\n\r\nconst LIMIT = 20\r\nexport default {\r\n  setup() {\r\n    let data = inject(\"data\")\r\n\r\n    let mvs = reactive([])\r\n    let totalPage = ref(1)\r\n    // 当前页码, 传递给Pagination组件\r\n    let currentPage = ref(1)\r\n    provide(\"currentPage\", currentPage)\r\n\r\n    // 监视data[\"search-mvs\"],即搜索到的mv\r\n    watch(\r\n      () => data[\"search-mvs\"],\r\n      (newValue) => {\r\n        // 如果还没有数据或者请求错误\r\n        if (!newValue.result || newValue.code !== 200) return\r\n\r\n        let result = newValue.result\r\n        totalPage.value = Math.ceil(result.mvCount / LIMIT)\r\n\r\n        mvs.length = 0\r\n        mvs = Object.assign(mvs, result.mvs)\r\n      }\r\n    )\r\n\r\n    // 监视搜索关键词,如果变化了,就把currentPage重置为1\r\n    watch(\r\n      () => data.keyword,\r\n      (newValue, oldValue) => {\r\n        if (newValue !== oldValue) {\r\n          currentPage.value = 1\r\n        }\r\n      }\r\n    )\r\n\r\n    // 页码改变,通知search,然后search会发送新的请求\r\n    let uploadCurrentPage = inject(\"uploadCurrentPage\")\r\n    watch(currentPage, (newValue) => {\r\n      uploadCurrentPage(newValue)\r\n    })\r\n\r\n    return { mvs, totalPage }\r\n  },\r\n  components: { Pagination, MVCard },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.mvs-wrapper {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 15px;\r\n}\r\n</style>\r\n","import { render } from \"./MVs.vue?vue&type=template&id=ef8d5ac8&scoped=true\"\nimport script from \"./MVs.vue?vue&type=script&lang=js\"\nexport * from \"./MVs.vue?vue&type=script&lang=js\"\n\nimport \"./MVs.vue?vue&type=style&index=0&id=ef8d5ac8&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\Programming\\\\Practice\\\\项目\\\\online-player\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ef8d5ac8\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MVCard.vue?vue&type=style&index=0&id=f990d618&lang=less&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MVs.vue?vue&type=style&index=0&id=ef8d5ac8&lang=less&scoped=true\"","// 位于\"最新mv\"页面的, 长方形MV单元. 也是discovery页面的\"最新mv\"部分的单元\r\n<template>\r\n  <div class=\"mv-card\" @click=\"routeGo\">\r\n    <div class=\"img-part\">\r\n      <img v-lazy=\"genImgURL(img, 500, 260)\" alt=\"\" :key=\"img\" />\r\n      <div class=\"play-count\">\r\n        <i class=\"iconfont icon-bofang\"></i>\r\n        {{ simplifyPlayCount(mv.playCount) }}\r\n      </div>\r\n      <div class=\"duration\" v-if=\"mv.duration\">\r\n        {{ parseTime(mv.duration / 1000) }}\r\n      </div>\r\n      <PlayIcon :size=\"45\"></PlayIcon>\r\n    </div>\r\n    <p class=\"name\">{{ mv.name }}</p>\r\n    <p class=\"author\">{{ mv.artistName }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PlayIcon from \"@/components/PlayIcon\"\r\nimport { useRouter } from \"vue-router\"\r\nimport { genImgURL, simplifyPlayCount, parseTime } from \"@/utils/common\"\r\nimport { computed } from \"vue\"\r\nexport default {\r\n  props: { mv: Object },\r\n  setup(props) {\r\n    let img = computed(() => {\r\n      if (props.mv.picUrl) return props.mv.picUrl\r\n      if (props.mv.cover) return props.mv.cover\r\n    })\r\n\r\n    const router = useRouter()\r\n    function routeGo() {\r\n      router.push({ path: `/mv/${props.mv.id}` })\r\n    }\r\n\r\n    return { img, routeGo, genImgURL, simplifyPlayCount, parseTime }\r\n  },\r\n  components: { PlayIcon },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.mv-card {\r\n  position: relative;\r\n  width: 25%;\r\n  padding: 0 12px;\r\n  margin-bottom: 36px;\r\n  cursor: pointer;\r\n  .img-part {\r\n    position: relative;\r\n    img {\r\n      vertical-align: top;\r\n      width: 100%;\r\n      max-height: 112.3px;\r\n      border-radius: 5px;\r\n    }\r\n    .play-count {\r\n      position: absolute;\r\n      top: 3px;\r\n      right: 5px;\r\n      font-size: @font-size-sm;\r\n      color: #fff;\r\n      i {\r\n        font-size: 100%;\r\n      }\r\n    }\r\n    .duration {\r\n      position: absolute;\r\n      bottom: 5px;\r\n      right: 5px;\r\n      font-size: @font-size-sm;\r\n      color: #fff;\r\n    }\r\n  }\r\n  .name,\r\n  .author {\r\n    font-size: @font-size-sm;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .name {\r\n    margin-top: 8px;\r\n  }\r\n  .author {\r\n    margin-top: 4px;\r\n    color: var(--font-color-grey-shallow);\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./MVCard.vue?vue&type=template&id=f990d618&scoped=true\"\nimport script from \"./MVCard.vue?vue&type=script&lang=js\"\nexport * from \"./MVCard.vue?vue&type=script&lang=js\"\n\nimport \"./MVCard.vue?vue&type=style&index=0&id=f990d618&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\Programming\\\\Practice\\\\项目\\\\online-player\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f990d618\"]])\n\nexport default __exports__"],"sourceRoot":""}