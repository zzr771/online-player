{"version":3,"sources":["webpack:///./src/api/mv.js","webpack:///./src/components/MVCard.vue?fe14","webpack:///./src/pages/NewMVs/NewMVs.vue","webpack:///./src/components/TabsRound.vue","webpack:///./src/components/TabsRound.vue?634d","webpack:///./src/pages/NewMVs/NewMVs.vue?91f6","webpack:///./src/pages/NewMVs/NewMVs.vue?af47","webpack:///./src/components/MVCard.vue","webpack:///./src/components/MVCard.vue?d6d7","webpack:///./src/components/TabsRound.vue?3cf2"],"names":["reqMvDetail","id","ajax","mvid","reqMvUrl","reqSimiMvs","reqAllMvs","params","class","ref","mvs","mv","index","key","totalPageNum","pageNum","tabs","row","CName","options","option","on","clickOption","name","setup","forEach","item","updateOnTabs","newValue","onTabs","tab","immediate","__exports__","LIMIT","currentPage","getAllMvs","paramObj","limit","offset","value","_mvs","Object","assign","data","initNum","count","Math","ceil","_onTabs","newMvs","scrollIntoView","behavior","components","TabsRound","MVCard","Pagination","render","routeGo","alt","img","genImgURL","simplifyPlayCount","playCount","duration","parseTime","size","artistName","props","picUrl","cover","router","push","path","PlayIcon"],"mappings":"gHAAA,wJAGaA,EAAc,SAACC,GAAD,OAAQC,eAAK,aAAc,CAAEC,KAAMF,GAAM,IACvDG,EAAW,SAACH,GAAD,OAAQC,eAAK,UAAW,CAAED,GAAIA,KACzCI,EAAa,SAACJ,GAAD,OAAQC,eAAK,WAAY,CAAEC,KAAMF,KAG9CK,EAAY,SAACC,GAAD,OAAYL,eAAK,UAAWK,EAAQ,K,oCCR7D,W,8DCEOC,MAAM,UAAUC,IAAI,U,GAElBD,MAAM,c,4IAFb,eAMM,MANN,EAMM,CALJ,eAAuB,GACvB,eAEM,MAFN,EAEM,E,mBADJ,eAAkE,2BAApC,EAAAE,KAAG,SAAjBC,EAAIC,G,wBAApB,eAAkE,GAA9BC,IAAKD,EAAQD,GAAIA,G,0BAEvD,eAAiD,GAApCG,aAAc,EAAAC,SAAO,0B,6CCL/BP,MAAM,e,GAEDA,MAAM,Y,GACRA,MAAM,W,8DAHd,eAeM,MAfN,EAeM,E,mBAdJ,eAaM,2BAbuC,EAAAQ,MAAI,SAAnBC,EAAKL,G,wBAAnC,eAaM,OAbDJ,MAAM,WAAyCK,IAAKD,G,CACvD,eAA8C,OAA9C,EAA8C,eAApBK,EAAIC,OAAQ,IAAC,GACvC,eAUK,KAVL,EAUK,E,mBATH,eAQK,2BALuBD,EAAIE,SAAO,SAA7BC,EAAQR,G,wBAHlB,eAQK,MAPHJ,MAAK,gBAAC,SAAQ,IACAY,EAAOC,MAEpBR,IAAKD,EACL,QAAK,mBAAE,EAAAU,YAAYF,EAAQH,K,eAEzBG,EAAOG,MAAI,S,6CAST,GACbC,MADa,WAEX,IAAMR,EAAO,eAAS,CACpB,CACEO,KAAM,OACNL,MAAO,KACPC,QAAS,CACP,CAAEI,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,KAGtB,CACEE,KAAM,OACNL,MAAO,KACPC,QAAS,CACP,CAAEI,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,MAAOF,IAAI,GACnB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,MAAOF,IAAI,GACnB,CAAEE,KAAM,OAAQF,IAAI,KAGxB,CACEE,KAAM,QACNL,MAAO,KACPC,QAAS,CACP,CAAEI,KAAM,OAAQF,IAAI,GACpB,CAAEE,KAAM,KAAMF,IAAI,GAClB,CAAEE,KAAM,KAAMF,IAAI,OAMxB,SAASC,EAAYF,EAAQH,GAEvBG,EAAOC,KACXJ,EAAIE,QAAQM,SAAQ,SAACC,GACnBA,EAAKL,IAAK,KAEZD,EAAOC,IAAK,GAId,IAAIM,EAAe,eAAO,gBAiB1B,OAhBA,eACEX,GACA,SAACY,GACC,IAAIC,EAAS,GACbD,EAASH,SAAQ,SAACR,GAChBA,EAAIE,QAAQM,SAAQ,SAACK,GACfA,EAAIT,KACNQ,EAAOZ,EAAIM,MAAQO,EAAIP,YAI7BI,EAAaE,KAEf,CAAEE,WAAW,IAGR,CAAEf,OAAMM,iB,iCChFnB,MAAMU,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,Q,oCFUTC,EAAQ,GACC,GACbT,MADa,WAEX,IAAId,EAAM,eAAS,IACfwB,EAAc,eAAI,GACtB,eAAQ,cAAeA,GAEvB,IAAInB,EAAU,eAAI,GAEdc,EAAS,GAPP,SASSM,EATT,gGASN,WAAyBC,GAAzB,8FACEA,EAASC,MAAQJ,EACjBG,EAASE,QAAUJ,EAAYK,MAAQ,GAAKN,EAF9C,SAGqB,eAAUG,GAH/B,OAGQI,EAHR,OAIE9B,EAAM+B,OAAOC,OAAOhC,EAAK8B,EAAKG,MACzB5B,EAAQwB,OACXK,EAAQJ,EAAKK,OANjB,2CATM,wBAkBN,SAASD,EAAQC,GACf9B,EAAQwB,MAAQO,KAAKC,KAAKF,EAAQZ,GAGpC,eAAQ,gBAAgB,SAACe,GACvBnB,EAASmB,EACTb,EAAUN,MAGZ,IAAIoB,EAAS,eAAI,MAMjB,OALA,eAAMf,GAAa,WACjBe,EAAOV,MAAMW,eAAe,CAAEC,SAAU,WACxChB,EAAUN,MAGL,CAAEnB,MAAKK,UAASkC,WAEzBG,WAAY,CAAEC,YAAWC,SAAA,KAAQC,aAAA,O,UGjDnC,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,kCCTf,W,kMCGShD,MAAM,Y,GAEJA,MAAM,c,uBACT,eAAoC,KAAjCA,MAAM,wBAAsB,Y,SAG5BA,MAAM,Y,GAKVA,MAAM,Q,GACNA,MAAM,U,0GAbX,eAcM,OAdDA,MAAM,UAAW,QAAK,8BAAE,EAAAiD,SAAA,EAAAA,QAAA,sB,CAC3B,eAUM,MAVN,EAUM,C,iCATJ,eAA2D,OAApBC,IAAI,GAAI7C,IAAK,EAAA8C,K,eAAvC,EAAAC,UAAU,EAAAD,IAAG,YAC1B,eAGM,MAHN,EAGM,CAFJ,E,eAAoC,IACpC,eAAG,EAAAE,kBAAkB,EAAAlD,GAAGmD,YAAS,KAEP,EAAAnD,GAAGoD,U,iBAA/B,eAEM,MAFN,EAEM,eADD,EAAAC,UAAU,EAAArD,GAAGoD,SAAQ,U,sBAE1B,eAAgC,GAArBE,KAAM,OAEnB,eAAiC,IAAjC,EAAiC,eAAd,EAAAtD,GAAGY,MAAI,GAC1B,eAAyC,IAAzC,EAAyC,eAApB,EAAAZ,GAAGuD,YAAU,K,wCASvB,GACbC,MAAO,CAAExD,GAAI8B,QACbjB,MAFa,SAEP2C,GACJ,IAAIR,EAAM,gBAAS,WACjB,OAAIQ,EAAMxD,GAAGyD,OAAeD,EAAMxD,GAAGyD,OACjCD,EAAMxD,GAAG0D,MAAcF,EAAMxD,GAAG0D,WAApC,KAGIC,EAAS,iBACf,SAASb,IACPa,EAAOC,KAAK,CAAEC,KAAM,OAAF,OAASL,EAAMxD,GAAGV,MAGtC,MAAO,CAAE0D,MAAKF,UAASG,UAAA,OAAWC,kBAAA,OAAmBG,UAAA,SAEvDZ,WAAY,CAAEqB,WAAA,O,iCChChB,MAAMzC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASwB,GAAQ,CAAC,YAAY,qBAE1E,U,kCCTf,W","file":"js/chunk-497b7e36.082f4e02.js","sourcesContent":["import ajax from \"./ajax\"\r\n\r\n// MV详情页\r\nexport const reqMvDetail = (id) => ajax(\"/mv/detail\", { mvid: id }, 1)\r\nexport const reqMvUrl = (id) => ajax(\"/mv/url\", { id: id })\r\nexport const reqSimiMvs = (id) => ajax(\"/simi/mv\", { mvid: id })\r\n\r\n// \"最新MV\"页\r\nexport const reqAllMvs = (params) => ajax(\"/mv/all\", params, 1)\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MVCard.vue?vue&type=style&index=0&id=f990d618&lang=less&scoped=true\"","// \"最新MV\"一级路由页\r\n<template>\r\n  <div class=\"new-mvs\" ref=\"newMvs\">\r\n    <TabsRound></TabsRound>\r\n    <div class=\"mv-wrapper\">\r\n      <MVCard v-for=\"(mv, index) in mvs\" :key=\"index\" :mv=\"mv\"></MVCard>\r\n    </div>\r\n    <Pagination :totalPageNum=\"pageNum\"></Pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TabsRound from \"@/components/TabsRound\"\r\nimport MVCard from \"@/components/MVCard\"\r\nimport Pagination from \"@/components/Pagination\"\r\nimport { ref, reactive, provide, watch } from \"vue\"\r\nimport { reqAllMvs } from \"@/api/mv\"\r\n\r\n// 一页中展示多少mv\r\nconst LIMIT = 40\r\nexport default {\r\n  setup() {\r\n    let mvs = reactive([])\r\n    let currentPage = ref(1)\r\n    provide(\"currentPage\", currentPage)\r\n\r\n    let pageNum = ref(0)\r\n    // 记录所有被选中的tab\r\n    let onTabs = {}\r\n\r\n    async function getAllMvs(paramObj) {\r\n      paramObj.limit = LIMIT\r\n      paramObj.offset = (currentPage.value - 1) * LIMIT\r\n      const _mvs = await reqAllMvs(paramObj)\r\n      mvs = Object.assign(mvs, _mvs.data)\r\n      if (!pageNum.value) {\r\n        initNum(_mvs.count)\r\n      }\r\n    }\r\n    function initNum(count) {\r\n      pageNum.value = Math.ceil(count / LIMIT)\r\n    }\r\n\r\n    provide(\"updateOnTabs\", (_onTabs) => {\r\n      onTabs = _onTabs\r\n      getAllMvs(onTabs)\r\n    })\r\n\r\n    let newMvs = ref(null)\r\n    watch(currentPage, () => {\r\n      newMvs.value.scrollIntoView({ behavior: \"smooth\" })\r\n      getAllMvs(onTabs)\r\n    })\r\n\r\n    return { mvs, pageNum, newMvs }\r\n  },\r\n  components: { TabsRound, MVCard, Pagination },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.new-mvs {\r\n  padding: 16px 32px;\r\n  .mv-wrapper {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    margin: 0 -12px 16px;\r\n  }\r\n}\r\n</style>\r\n","// 标签组 包含多组不同分类的标签, 被选中的标签以圆角高亮显示\r\n<template>\r\n  <div class=\"tabs-round\">\r\n    <div class=\"tabs-row\" v-for=\"(row, index) in tabs\" :key=\"index\">\r\n      <span class=\"row-name\">{{ row.CName }}：</span>\r\n      <ul class=\"options\">\r\n        <li\r\n          class=\"option\"\r\n          :class=\"{ on: option.on }\"\r\n          v-for=\"(option, index) in row.options\"\r\n          :key=\"index\"\r\n          @click=\"clickOption(option, row)\"\r\n        >\r\n          {{ option.name }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, watch, inject } from \"vue\"\r\nexport default {\r\n  setup() {\r\n    const tabs = reactive([\r\n      {\r\n        name: \"area\",\r\n        CName: \"地区\",\r\n        options: [\r\n          { name: \"全部\", on: true },\r\n          { name: \"内地\", on: false },\r\n          { name: \"港台\", on: false },\r\n          { name: \"欧美\", on: false },\r\n          { name: \"日本\", on: false },\r\n          { name: \"韩国\", on: false },\r\n        ],\r\n      },\r\n      {\r\n        name: \"type\",\r\n        CName: \"类型\",\r\n        options: [\r\n          { name: \"全部\", on: true },\r\n          { name: \"官方版\", on: false },\r\n          { name: \"原声\", on: false },\r\n          { name: \"现场版\", on: false },\r\n          { name: \"网易出品\", on: false },\r\n        ],\r\n      },\r\n      {\r\n        name: \"order\",\r\n        CName: \"排序\",\r\n        options: [\r\n          { name: \"上升最快\", on: true },\r\n          { name: \"最热\", on: false },\r\n          { name: \"最新\", on: false },\r\n        ],\r\n      },\r\n    ])\r\n\r\n    // 选项被点击后,把on赋值为true.\r\n    function clickOption(option, row) {\r\n      // 如果选项本来就是on,就什么都不做,免得触发watch\r\n      if (option.on) return\r\n      row.options.forEach((item) => {\r\n        item.on = false\r\n      })\r\n      option.on = true\r\n    }\r\n\r\n    // 记录所有为on的tab, 封装为对象, 供父组件使用\r\n    let updateOnTabs = inject(\"updateOnTabs\")\r\n    watch(\r\n      tabs,\r\n      (newValue) => {\r\n        let onTabs = {}\r\n        newValue.forEach((row) => {\r\n          row.options.forEach((tab) => {\r\n            if (tab.on) {\r\n              onTabs[row.name] = tab.name\r\n            }\r\n          })\r\n        })\r\n        updateOnTabs(onTabs)\r\n      },\r\n      { immediate: true }\r\n    )\r\n\r\n    return { tabs, clickOption }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.tabs-round {\r\n  .tabs-row {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 24px;\r\n    margin-bottom: 16px;\r\n    font-size: @font-size-sm;\r\n    .row-name {\r\n      color: var(--font-color);\r\n    }\r\n    .options {\r\n      display: flex;\r\n      align-items: center;\r\n      height: 100%;\r\n      .option {\r\n        position: relative;\r\n        margin: 0 16px;\r\n        padding: 4px 12px;\r\n        border-radius: 11px;\r\n        color: var(--tab-item-color);\r\n        cursor: pointer;\r\n        &:hover {\r\n          color: var(--tab-item-hover-color);\r\n          // color: #343434;\r\n        }\r\n        &:not(:last-child)::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          right: -16px;\r\n          width: 1px;\r\n          height: 16px;\r\n          background: var(--border);\r\n        }\r\n        &.on {\r\n          color: @theme-color;\r\n          background: var(--shallow-theme-bgcolor);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./TabsRound.vue?vue&type=template&id=fc191ab6&scoped=true\"\nimport script from \"./TabsRound.vue?vue&type=script&lang=js\"\nexport * from \"./TabsRound.vue?vue&type=script&lang=js\"\n\nimport \"./TabsRound.vue?vue&type=style&index=0&id=fc191ab6&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\Programming\\\\Practice\\\\项目\\\\online-player\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fc191ab6\"]])\n\nexport default __exports__","import { render } from \"./NewMVs.vue?vue&type=template&id=61dff2d3&scoped=true\"\nimport script from \"./NewMVs.vue?vue&type=script&lang=js\"\nexport * from \"./NewMVs.vue?vue&type=script&lang=js\"\n\nimport \"./NewMVs.vue?vue&type=style&index=0&id=61dff2d3&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\Programming\\\\Practice\\\\项目\\\\online-player\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61dff2d3\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NewMVs.vue?vue&type=style&index=0&id=61dff2d3&lang=less&scoped=true\"","// 位于\"最新mv\"页面的, 长方形MV单元. 也是discovery页面的\"最新mv\"部分的单元\r\n<template>\r\n  <div class=\"mv-card\" @click=\"routeGo\">\r\n    <div class=\"img-part\">\r\n      <img v-lazy=\"genImgURL(img, 500, 260)\" alt=\"\" :key=\"img\" />\r\n      <div class=\"play-count\">\r\n        <i class=\"iconfont icon-bofang\"></i>\r\n        {{ simplifyPlayCount(mv.playCount) }}\r\n      </div>\r\n      <div class=\"duration\" v-if=\"mv.duration\">\r\n        {{ parseTime(mv.duration / 1000) }}\r\n      </div>\r\n      <PlayIcon :size=\"45\"></PlayIcon>\r\n    </div>\r\n    <p class=\"name\">{{ mv.name }}</p>\r\n    <p class=\"author\">{{ mv.artistName }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PlayIcon from \"@/components/PlayIcon\"\r\nimport { useRouter } from \"vue-router\"\r\nimport { genImgURL, simplifyPlayCount, parseTime } from \"@/utils/common\"\r\nimport { computed } from \"vue\"\r\nexport default {\r\n  props: { mv: Object },\r\n  setup(props) {\r\n    let img = computed(() => {\r\n      if (props.mv.picUrl) return props.mv.picUrl\r\n      if (props.mv.cover) return props.mv.cover\r\n    })\r\n\r\n    const router = useRouter()\r\n    function routeGo() {\r\n      router.push({ path: `/mv/${props.mv.id}` })\r\n    }\r\n\r\n    return { img, routeGo, genImgURL, simplifyPlayCount, parseTime }\r\n  },\r\n  components: { PlayIcon },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.mv-card {\r\n  position: relative;\r\n  width: 25%;\r\n  padding: 0 12px;\r\n  margin-bottom: 36px;\r\n  cursor: pointer;\r\n  .img-part {\r\n    position: relative;\r\n    img {\r\n      vertical-align: top;\r\n      width: 100%;\r\n      max-height: 112.3px;\r\n      border-radius: 5px;\r\n    }\r\n    .play-count {\r\n      position: absolute;\r\n      top: 3px;\r\n      right: 5px;\r\n      font-size: @font-size-sm;\r\n      color: #fff;\r\n      i {\r\n        font-size: 100%;\r\n      }\r\n    }\r\n    .duration {\r\n      position: absolute;\r\n      bottom: 5px;\r\n      right: 5px;\r\n      font-size: @font-size-sm;\r\n      color: #fff;\r\n    }\r\n  }\r\n  .name,\r\n  .author {\r\n    font-size: @font-size-sm;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .name {\r\n    margin-top: 8px;\r\n  }\r\n  .author {\r\n    margin-top: 4px;\r\n    color: var(--font-color-grey-shallow);\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./MVCard.vue?vue&type=template&id=f990d618&scoped=true\"\nimport script from \"./MVCard.vue?vue&type=script&lang=js\"\nexport * from \"./MVCard.vue?vue&type=script&lang=js\"\n\nimport \"./MVCard.vue?vue&type=style&index=0&id=f990d618&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\Programming\\\\Practice\\\\项目\\\\online-player\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f990d618\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TabsRound.vue?vue&type=style&index=0&id=fc191ab6&lang=less&scoped=true\""],"sourceRoot":""}